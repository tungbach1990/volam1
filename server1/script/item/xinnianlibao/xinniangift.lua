IncludeLib("ITEM")
--DinhHQ
--20110407: kh«ng cho sö dông lÖnh bµi vi s¬n ®¶o trong v­ît ¶i
Include("\\script\\vng_feature\\forbiditem\\vngforbidspecialitem.lua")

TB_XINNIAN_GIFE = {
	[908] = {	{	{	0,	11,	97,	1,	1,	1	},
					{	0,	11,	98,	1,	1,	1	},
					{	0,	11,	99,	1,	1,	1	},
					{	0,	11,	100,	1,	1,	1	},
					{	0,	11,	101,	1,	1,	1	},
					{	0,	11,	107,	1,	1,	1	},
					{	0,	11,	108,	1,	1,	1	},
					{	0,	11,	109,	1,	1,	1	},
					{	0,	11,	110,	1,	1,	1	},
					{	0,	11,	111,	1,	1,	1	},	},	"TÊt c¶ thuéc tÝnh ngò hµnh MÆt n¹ b¹n ®ång hµnh thiÕu niªn vµ thanh niªn",	0},
					
	[909] = {	{	{	0,	11,	97,	1,	1,	1	},
					{	0,	11,	98,	1,	1,	1	},
					{	0,	11,	99,	1,	1,	1	},
					{	0,	11,	100,	1,	1,	1	},
					{	0,	11,	101,	1,	1,	1	},
					{	0,	11,	107,	1,	1,	1	},
					{	0,	11,	108,	1,	1,	1	},
					{	0,	11,	109,	1,	1,	1	},
					{	0,	11,	110,	1,	1,	1	},
					{	0,	11,	111,	1,	1,	1	},	},	"Mét trong sè thuéc tÝnh ngò hµnh ngÉu nhiªn MÆt n¹ b¹n ®ång hµnh thiÕu niªn vµ thanh niªn",	0},
	
	[910] = {	{	6,	0,	1,	1,	0,	1	},	"Mét bao 'D­îc hoµn'",	3,	1,	10},
	[911] = {	{	0,	0,	0,	10,	0,	1	},	"HuyÒn ThiÕt KiÕm (Ngò hµnh ngÉu nhiªn) mçi thø mét c©y",	5,	0,	4},
	[912] = {	{	0,	0,	1, 10,	0,	1	},	"§¹i Phong §ao (Ngò hµnh ngÉu nhiªn) mçi thø mét c©y",	5,	0,	4},
	[913] = {	{	0,	0,	2,	10,	0,	1	},	"Kim C« Bæng (Ngò hµnh ngÉu nhiªn) mçi thø mét c©y",	5,	0,	4},
	[914] = {	{	0,	0,	3,	10,	0,	1	},	"Ph¸ Thiªn KÝch (Ngò hµnh ngÉu nhiªn) mçi thø mét c©y",	5,	0,	4},
	[915] = {	{	0,	0,	4,	10,	0,	1	},	"Ph¸ Thiªn Chïy (Ngò hµnh ngÉu nhiªn) mçi thø mét c©y",	5,	0,	4},
	[916] = {	{	0,	1,	0,	10,	0,	1	},	"B¸ V­¬ng Tiªu (Ngò hµnh ngÉu nhiªn) mçi thø mét c©y",	5,	0,	4},
	[917] = {	{	0,	1,	1,	10,	0,	1	},	"Tóy NguyÖt §ao (Ngò hµnh ngÉu nhiªn) mçi thø mét c©y",	5,	0,	4},
	[918] = {	{	0,	1,	2,	10,	0,	1	},	"Khæng T­íc Linh (Ngò hµnh ngÉu nhiªn) mçi thø mét mãn",	5,	0,	4},
	[919] = {	{	0,	8,	0,	10,	0,	1	},	"Long Phông HuyÕt Ngäc Tr¹c (Ngò hµnh ngÉu nhiªn) mçi thø mét mãn",	5,	0,	4},
	[920] = {	{	0,	8,	1,	10,	0,	1	},	"Thiªn Tµm Hé UyÓn (Ngò hµnh ngÉu nhiªn) mçi thø mét mãn",	5,	0,	4},
	[921] = {	{	0,	7,	3,	10,	0,	1	},	"Th«ng Thiªn Ph¸t Qu¸n (Ngò hµnh ngÉu nhiªn) mçi thø mét mãn",	5,	0,	4},
	[922] = {	{	0,	7,	4,	10,	0,	1	},	"YÓm NhËt Kh«i (Ngò hµnh ngÉu nhiªn) mçi thø mét mãn",	5,	0,	4},
	[923] = {	{	0,	6,	1,	10,	0,	1	},	"B¹ch Kim yªu ®¸i (Ngò hµnh ngÉu nhiªn) mçi thø mét mãn",	5,	0,	4},
	[924] = {	{	0,	5,	1,	10,	0,	1	},	"Thiªn Tµm Ngoa (Ngò hµnh ngÉu nhiªn) mçi thø mét mãn",	5,	0,	4},
	[925] = {	{	0,	5,	3,	10,	0,	1	},	"Phi Phông Ngoa (Ngò hµnh ngÉu nhiªn) mçi thø mét mãn",	5,	0,	4},
	[926] = {	{	6,	1,	834,	2,	1,	1	},	"Kim Cang BÊt ph¸ §ång hµnh MËt tÞch cÊp 2 ®Õn cÊp 5, mçi thø mét cuèn",	4,	2,	5},
	[927] = {	{	6,	1,	835,	2,	1,	1	},	"B¸ch §éc BÊt X©m §ång hµnh MËt tÞch cÊp 2 ®Õn cÊp 5, mçi thø mét cuèn",	4,	2,	5},
	[928] = {	{	6,	1,	836,	2,	1,	1	},	"B¨ng TuyÕt S¬ Dung §ång hµnh MËt tÞch cÊp 2 ®Õn cÊp 5, mçi thø mét cuèn",	4,	2,	5},
	[929] = {	{	6,	1,	837,	2,	1,	1	},	"Ch©n Háa Kh¸ng Lùc §ång hµnh MËt tÞch cÊp 2 ®Õn cÊp 5, mçi thø mét cuèn",	4,	2,	5},
	[930] = {	{	6,	1,	838,	2,	1,	1	},	"L«i §×nh Hé gi¸p §ång hµnh MËt tÞch cÊp 2 ®Õn cÊp 5, mçi thø mét cuèn",	4,	2,	5},
	[931] = {	{	6,	1,	849,	1,	1,	1	},	"B×nh Hßa KhÝ QuyÕt §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[932] = {	{	6,	1,	850,	1,	1,	1	},	"H­ Kh«ng ThiÓm ¶nh §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[933] = {	{	6,	1,	851,	1,	1,	1	},	"Héi ThÇn TÜnh T©m §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[934] = {	{	6,	1,	852,	1,	1,	1	},	"V« NiÖm V« Kinh §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[935] = {	{	6,	1,	853,	1,	1,	1	},	"Ngò Hµnh V« T­íng §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[936] = {	{	6,	1,	854,	1,	1,	1	},	"Di KhÝ Phiªu Tung §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[937] = {	{	6,	1,	855,	1,	1,	1	},	"Hoa Phi §iÖp Vò §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[938] = {	{	6,	1,	901,	1,	1,	1	},	"V« Nh©n V« Ng· §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[939] = {	{	6,	1,	859,	1,	1,	1	},	"TÝnh Ng¹o Tam §«ng §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[940] = {	{	6,	1,	860,	1,	1,	1	},	"§iÓm HuyÕt TiÖt M¹ch §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[941] = {	{	6,	1,	861,	1,	1,	1	},	"V¹n §éc BÊt Phôc §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[942] = {	{	6,	1,	862,	1,	1,	1	},	"Th©n Khinh Nh­ YÕn §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[943] = {	{	6,	1,	863,	1,	1,	1	},	"Ng­ng ¢m Quy Nguyªn §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[944] = {	{	6,	1,	864,	1,	1,	1	},	"DÞch Cèt Kinh §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[945] = {	{	6,	1,	865,	1,	1,	1	},	"Thóc Th©n ThuËt §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[946] = {	{	6,	1,	866,	1,	1,	1	},	"Ho·n Th©n ThuËt §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[947] = {	{	6,	1,	867,	1,	1,	1	},	"HuyÒn Môc §Þnh Th©n ThuËt §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[948] = {	{	6,	1,	868,	1,	1,	1	},	"Ých Thä ¢m D­¬ng §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[949] = {	{	6,	1,	869,	1,	1,	1	},	"An Phñ Chi Ng÷ §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[950] = {	{	6,	1,	870,	1,	1,	1	},	"Tam Sinh H÷u H¹nh §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[951] = {	{	6,	1,	871,	1,	1,	1	},	"Quû Mª Ma HoÆc §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[952] = {	{	6,	1,	872,	1,	1,	1	},	"§o¹t MÖnh TriÒn NhiÔu §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[953] = {	{	6,	1,	873,	1,	1,	1	},	"Yªu Hå Tr¸i ¶nh §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[954] = {	{	6,	1,	874,	1,	1,	1	},	"HoÆc ThÇn Lo¹n T©m §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[955] = {	{	6,	1,	875,	1,	1,	1	},	"C« Th©n To¸i ¶nh §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[956] = {	{	6,	1,	876,	1,	1,	1	},	"Tö Vong Ki B¸n §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[957] = {	{	6,	1,	877,	1,	1,	1	},	"Th©m Hån NiÖm X­íng §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[958] = {	{	6,	1,	878,	1,	1,	1	},	"CËp Hån Chó §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[959] = {	{	6,	1,	879,	1,	1,	1	},	"Hãa Tñy V« ý §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[960] = {	{	6,	1,	880,	1,	1,	1	},	"Dung Cèt V« Tung §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[961] = {	{	6,	1,	882,	1,	1,	1	},	"¸m §éc Chi Thñ §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	[962] = {	{	6,	1,	883,	1,	1,	1	},	"Tam Phôc Chi KhÝ §ång hµnh MËt tÞch cÊp 1 ®Õn cÊp 5, mçi thø mét cuèn",	4,	1,	5},
	
	[963] = {	{	{	6,	1,	926,	1,	1,	1	},
					{	6,	1,	927,	1,	1,	1	},
					{	6,	1,	928,	1,	1,	1	},
					{	6,	1,	929,	1,	1,	1	},
					{	6,	1,	930,	1,	1,	1	},	},	"5 hép §ång hµnh MËt tÞch (Kü n¨ng kh¸ng tÝnh) ",	0},
					
	[964] = {	{	{	6,	1,	949,	1,	1,	1	},
					{	6,	1,	931,	1,	1,	1	},
					{	6,	1,	932,	1,	1,	1	},
					{	6,	1,	935,	1,	1,	1	},
					{	6,	1,	936,	1,	1,	1	},
					{	6,	1,	937,	1,	1,	1	},
					{	6,	1,	944,	1,	1,	1	},
					{	6,	1,	948,	1,	1,	1	},
					{	6,	1,	950,	1,	1,	1	},	},	"9 hép §ång hµnh MËt tÞch (Kü n¨ng thÕ giíi) ",	0},
					
	[965] = {	{	{	6,	1,	933,	1,	1,	1	},
					{	6,	1,	934,	1,	1,	1	},
					{	6,	1,	951,	1,	1,	1	},
					{	6,	1,	952,	1,	1,	1	},
					{	6,	1,	956,	1,	1,	1	},	},	"5 hép §ång hµnh MËt tÞch (Kim) ",	0},
					
	[966] = {	{	{	6,	1,	939,	1,	1,	1	},
					{	6,	1,	940,	1,	1,	1	},
					{	6,	1,	958,	1,	1,	1	},
					{	6,	1,	961,	1,	1,	1	},	},	"4 hép §ång hµnh MËt tÞch (Méc) ",	0},
					
	[967] = {	{	{	6,	1,	943,	1,	1,	1	},
					{	6,	1,	946,	1,	1,	1	},
					{	6,	1,	955,	1,	1,	1	},
					{	6,	1,	957,	1,	1,	1	},	},	"4 hép §ång hµnh MËt tÞch (Thñy) ",	0},
					
	[968] = {	{	{	6,	1,	942,	1,	1,	1	},
					{	6,	1,	953,	1,	1,	1	},
					{	6,	1,	954,	1,	1,	1	},
					{	6,	1,	959,	1,	1,	1	},	},	"4 hép §ång hµnh MËt tÞch (Háa) ",	0},
					
	[969] = {	{	{	6,	1,	938,	1,	1,	1	},
					{	6,	1,	941,	1,	1,	1	},
					{	6,	1,	947,	1,	1,	1	},
					{	6,	1,	960,	1,	1,	1	},
					{	6,	1,	962,	1,	1,	1	},	},	"5 hép §ång hµnh MËt tÞch (Thæ) ",	0},
					
	[970] = {	{	6,	1,	977,	1,	1,	1	},	"10 hép kü n¨ng §¹i B¹ch C©u hoµn", -1, 10},
	
	[971] = {	{	6,	1,	130,	1,	1,	1	},	"10 hép §¹i B¹ch C©u hoµn", -1, 10},
	
	[972] = {	{	{	0,	11,	101,	1,	1,	1	},
					{	0,	11,	111,	1,	1,	1	},	},	"MÆt n¹ ThiÕu Niªn Kim Phong, Thanh Niªn Kim Phong mçi thø mét c¸i",	0},
	
	[973] = {	{	{	0,	11,	100,	1,	1,	1	},
					{	0,	11,	110,	1,	1,	1	},	},	"MÆt n¹ ThiÕu Niªn H¶i §­êng, Thanh Niªn H¶i §­êng mçi thø mét c¸i",	0},
					
	[974] = {	{	{	0,	11,	98,	1,	1,	1	},
					{	0,	11,	108,	1,	1,	1	},	},	"MÆt n¹ ThiÕu Niªn TiÕu S­¬ng, Thanh Niªn TiÕu S­¬ng mçi thø mét c¸i",	0},
					
	[975] = {	{	{	0,	11,	99,	1,	1,	1	},
					{	0,	11,	109,	1,	1,	1	},	},	"MÆt n¹ ThiÕu Niªn Háa NhËn, Thanh Niªn Háa NhËn mçi thø mét c¸i",	0},
					
	[976] = {	{	{	0,	11,	97,	1,	1,	1	},
					{	0,	11,	107,	1,	1,	1	},	},	"MÆt n¹ ThiÕu Niªn L«i KiÕm, Thanh Niªn L«i KiÕm mçi thø mét c¸i",	0},
					
	[995] = {	{	6,	1,	990,	1,	1,	1	},	"10 L«i Tèc hoµn",	-1,	10},
	[996] = {	{	6,	1,	985,	1,	1,	1	},	"10 Cµn Kh«n Na Di phï ",	-1,	10},
	[997] = {	{	6,	1,	986,	1,	1,	1	},	"10 Di H×nh Ho¸n ¶nh phï ",	-1,	10},
	[998] = {	{	6,	1,	982,	1,	1,	1	},	"10 HuyÒn Thiªn H·m TÜnh",	-1,	10},
	[999] = {	{	6,	1,	984,	1,	1,	1	},	"10 B¨ng Phong H·m TÜnh",	-1,	10},
	[1000] = {	{	6,	1,	988,	1,	1,	1	},	"10 'Kinh nghiÖm' phï (Cao cÊp) ",	-1,	10},
	[1001] = {	{	6,	1,	993,	1,	1,	1	},	"10 L«i ThÇn Ngäc",	-1,	10},
	[1002] = {	{	6,	1,	992,	1,	1,	1	},	"10 HuyÒn B¨ng Ngäc",	-1,	10},
	[1003] = {	{	6,	1,	979,	1,	1,	1	},	"10 B¨ng S­¬ng HiÖu gi¸c",	-1,	10},
	[1004] = {	{	6,	1,	980,	1,	1,	1	},	"10 B¹o L«i HiÖu gi¸c",	-1,	10},
	[1014] = {	{	6,	0,	1012,	1,	1,	1	},	"10 mãn quµ mµu xanh",	-1,	10},
	[1015] = {	{	6,	0,	1013,	1,	1,	1	},	"10 c¸i hoa tuyÕt",	-1,	10},
	[1018] = {	{	6,	0,	1017,	1,	1,	1	},	"10 b«ng hoa",	-1,	10},
	[1049] = {	{	6,	1,	1016,	1,	1,	1	},	"10 tÊm thiÖp Nh­ ý ",	-1,	10},
	[1055] = {	{	6,	1,	1053,	1,	1,	1	},	"10 tÊm thiÖp mµu",	-1,	10},
	[1074] = {	{	6,	1,	402,	1,	1,	1	},	"10 c¸i ThÇn bÝ ®¹i hång bao",	-1,	10},
	[1075] = {	{	6,	1,	906,	1,	1,	1	},	"10 qu¶ Huy Hoµng cao cÊp",	-1,	10},
	[1137] = {	{	4,	967,	1,	1,	0,	0	},	"10 B¨ng Th¹ch KÕt Tinh",	-1,	10},
	[1138] = {	{	4,	963,	1,	1,	0,	0	},	"10 Cóc Hoa Th¹ch",	-1,	10},
	[1139] = {	{	4,	968,	1,	1,	0,	0	},	"10 M¶nh thiªn th¹ch",	-1,	10},
	[1140] = {	{	4,	965,	1,	1,	0,	0	},	"10 B¨ng ThiÒm T¬",	-1,	10},
	[1141] = {	{	4,	966,	1,	1,	0,	0	},	"10 Kª HuyÕt Th¹ch",	-1,	10},
	[1142] = {	{	4,	964,	1,	1,	0,	0	},	"10 M· N·o",		-1,	10},
	[1143] = {	{	4,	969,	1,	1,	0,	0	},	"10 §iÒn Hoµng Th¹ch",	-1,	10},
	[1373] = {	{	6,	1,	74,	1,	1,	1	},	"5 B¹ch C©u Hoµn",	-1,	5},
	[1374] = {	{	6,	1,	1372,	1,	1,	1	},	"5 B¹ch C©u Hoµn kü n¨ng",	-1,	5},
	[1665] = {	{	6,	1,	23,	1,	1,	1	},	"10 cuèn ThiÕt La H¸n",	-1,	10},
	[2355] = {	{	6,	1,	2348,	1,	1,	0	},	"5 HuyÒn Thiªn Chïy",	-1,	5},
	[2515] = {	{	6,	0,	1,	1,	1,	0	},	format("%d %s", 5,"Tr­êng MÖnh hoµn"),	-1,	5},
	[2516] = {	{	6,	0,	2,	1,	1,	0	},	format("%d %s", 5,"Gia Bµo hoµn"),	-1,	5},
	[2517] = {	{	6,	0,	3,	1,	1,	0	},	format("%d %s", 5,"§¹i Lùc hoµn"),	-1,	5},
	[2518] = {	{	6,	0,	4,	1,	1,	0	},	format("%d %s", 5,"Cao ThiÓm hoµn"),	-1,	5},
	[2519] = {	{	6,	0,	5,	1,	1,	0	},	format("%d %s", 5,"Cao Trung hoµn"),	-1,	5},
	[2520] = {	{	6,	0,	6,	1,	1,	0	},	format("%d %s", 5,"Phi Tèc hoµn"),	-1,	5},
	[2521] = {	{	6,	0,	7,	1,	1,	0	},	format("%d %s", 5,"B¨ng Phßng hoµn"),	-1,	5},
	[2522] = {	{	6,	0,	8,	1,	1,	0	},	format("%d %s", 5,"L«i Phßng hoµn"),	-1,	5},
	[2523] = {	{	6,	0,	9,	1,	1,	0	},	format("%d %s", 5,"Háa Phßng hoµn"),	-1,	5},
	[2524] = {	{	6,	0,	10,	1,	1,	0	},	format("%d %s", 5,"§éc Phßng hoµn"),	-1,	5},
	[2525] = {	{	6,	1,	2432,	1,	1,	0	},	format("%d %s", 5,"LÖnh bµi Vi S¬n ®¶o"),	-1,	5},
}

function main(nItemIdx)
	_,_,detail = GetItemProp(nItemIdx)
	
	local strItemName = GetItemName(nItemIdx)
	if strItemName == "LÖnh bµi vi s¬n ®¶o lÔ bao" then
		if tbVNGForbidItem:IsForbidMap(strItemName, {tbVNGForbidItem.CHALLENGE_OF_TIME}) == 1 then
			return 1
		end
	end
	
	tbGift = TB_XINNIAN_GIFE[detail][1]
	if ( tbGift == nil ) then
		print("error xinnian gift "..GetItemProp(nItemIdx))
		return 1
	end
	
	if (TB_XINNIAN_GIFE[detail][3] == -1) then	--°´µÚ4¸ö²ÎÊýÖµ¸ø¶àÉÙ¸öÍ¬Ò»¸öÎïÆ·
		if (CalcFreeItemCellCount() < TB_XINNIAN_GIFE[detail][4]) then
			Msg2Player("Chç trèng trong hµnh trang cña b¹n kh«ng ®ñ");
			return 1;
		end;
		if (detail == 1075) then
			for i = 1, TB_XINNIAN_GIFE[detail][4] do
				local nItemID = AddItem(tbGift[1],	tbGift[2],	tbGift[3],	tbGift[4],	tbGift[5],	tbGift[6])
				ITEM_SetExpiredTime(nItemID, 10080);
				SyncItem(nItemID)
			end
			
		else
			for i = 1, TB_XINNIAN_GIFE[detail][4] do
				addGiftitem(tbGift[1],	tbGift[2],	tbGift[3],	tbGift[4],	tbGift[5],	tbGift[6])
			end
		end

	elseif (detail == 909) then	--Ëæ»ú¸øÒ»¸ö
		ranitem = random( getn(tbGift) )
		addGiftitem(tbGift[ranitem][1],	tbGift[ranitem][2],	tbGift[ranitem][3],	tbGift[ranitem][4],	tbGift[ranitem][5],	tbGift[ranitem][6])
	
	elseif (TB_XINNIAN_GIFE[detail][3] == 0) then	--ÁÐ±íÖÐµÄÈ«¸ø
		for i = 1, getn(tbGift) do
			addGiftitem(tbGift[i][1],	tbGift[i][2],	tbGift[i][3],	tbGift[i][4],	tbGift[i][5],	tbGift[i][6])
		end

	elseif (TB_XINNIAN_GIFE[detail][3] == 3) then	--µÚ3¸ö²ÎÊý£¨ÏêÏ¸ÀàÐÍ£©°´Ìõ¼þ
		for i = TB_XINNIAN_GIFE[detail][4],	TB_XINNIAN_GIFE[detail][5] do
			addGiftitem(tbGift[1],	tbGift[2],	i,	tbGift[4],	tbGift[5],	tbGift[6])
		end

	elseif (TB_XINNIAN_GIFE[detail][3] == 4) then	--µÚ4¸ö²ÎÊý£¨µÈ¼¶£©°´Ìõ¼þ
		for i = TB_XINNIAN_GIFE[detail][4], TB_XINNIAN_GIFE[detail][5] do
			addGiftitem(tbGift[1],	tbGift[2],	tbGift[3],	i,	tbGift[5],	tbGift[6])
		end

	elseif (TB_XINNIAN_GIFE[detail][3] == 5) then	--µÚ5¸ö²ÎÊý£¨ÎåÐÐ£©°´Ìõ¼þ
		for i = TB_XINNIAN_GIFE[detail][4],	TB_XINNIAN_GIFE[detail][5] do
			addGiftitem(tbGift[1],	tbGift[2],	tbGift[3],	tbGift[4],	i,	tbGift[6])
		end
	end
	Msg2Player("B¹n nhËn ®­îc <color=yellow>"..TB_XINNIAN_GIFE[detail][2])
end

function addGiftitem(...)
	if ( arg.n == 6 ) then
		AddItem ( arg[1], arg[2], arg[3], arg[4], arg[5], arg[6] )
	elseif ( arg.n == 2 ) then
		AddGoldItem( arg[1], arg[2] )
	elseif ( arg.n == 1 ) then
		AddEventItem( arg[1] )
	else
		print("the table of gift is wrong!!!")
	end
end